{"name": "test_Community_commentmore_list", "status": "failed", "statusDetails": {"message": "AssertionError: assert '5fcf4fab791d04000605a899' == '5fcf4fab791d04000605a898'", "trace": "self = <TestCase.Community.test_Community_commentmore_list.TestCommunitycommentmore_list object at 0x0000019B6F5F9370>\n\n    def test_Community_commentmore_list(self):\n        login()  # 调用登录接口通过token传出来\n        url = HTTP + \"/as_community/api/post/v1/add\"\n        headers = JSON\n    \n        # 拼装参数\n        paylo = {\n            \"title\": \"腾讯是全球第一线上游戏企业，重申目标价655港元\",\n            \"articleType\": 2,\n            \"content\": \"12月8日消息，摩根大通发表的研究报告指，[tag:00700.HK]$是全球收入规模第一的线上游戏企业，估计公司游戏业务有强劲增长潜力，\"\n                       \"相信海外市场属「蓝海市场」，公司可进一步抢占市场份额。现有游戏在变现方面仍有提升空间，例如《PUBG Mobile》、《英雄联盟手游版》等。\"\n                       \"而在内地市场，公司有庞大的用户基础，相信随着游戏品种扩张亦有变现的上行空间，预计用户会由低ARPU的小游戏转向高ARPU的游戏，相信将带动\"\n                       \"平台整体ARPU提升。\\n\\n在海外业务方面，该行估计腾讯在未来数年将继续扩张，而公司透过自家培育及股权投资等成功建立世界级的游戏开发能力，\"\n                       \"估计来自五至六款国际游戏的单季收入占整体收入25%，或手游收入的30-35%，并预计海外占比到2023年将升至40-50%。在本地市场方面，\"\n                       \"该行指出公司在内地市占约五成，渗透不同类型的游戏，不过在变现比例较高的游戏中腾讯市占率则少于两成，反映公司有潜力发掘机遇提升平台ARPU。\\n\\n\"\n                       \"该行维持对腾讯「增持」评级，目标价655港元。截至发稿，腾讯涨0.6%，报587港元，总市值5.6万亿港元。[tag:00700.HK]\",\n            \"images\": [{\n                \"name\": \"community/images/2020/12/04/16070706185435230.png\",\n                \"w\": 1000,\n                \"h\": 563,\n                \"url\": \"http://zhuorui-public.oss-cn-shenzhen.aliyuncs.com/community/images/2020/12/04/16070706185435230.png\"\n            }],\n            \"products\": [\n                {\n                    \"ts\": \"Hk\",\n                    \"code\": \"00700\",\n                    \"name\": \"腾讯控股\",\n                    \"type\": \"2\"\n                }\n            ]\n        }\n        # print(paylo)\n        sign1 = {\"sign\": get_sign(paylo)}  # 把参数签名后通过sign1传出来\n        payload1 = {}\n        payload1.update(paylo)\n        payload1.update(sign1)\n        headers = headers\n        # print(token)\n        # print(type(token))\n        token1 = yamltoken()\n        token = {\"token\": token1}\n        headers.update(token)  # 将token更新到headers\n        # print(headers)\n        payload = json.dumps(dict(payload1))\n        time.sleep(60.01)\n    \n        r = Requests(self.session).post(\n            url=url, headers=headers, data=payload, title=\"发帖\"\n        )\n        y = r.json()\n        postId = y.get(\"data\").get(\"postId\")\n        # print(postId)\n        body = {'postId': f\"{postId}\"}\n        body2 = {\n            \"content\": \" [tag:00700.HK]买入[tag:09988.HK]买入\",\n            \"products\": [\n                {\n                    \"ts\": \"Hk\",\n                    \"code\": \"00700\",\n                    \"name\": \"腾讯控股\",\n                    \"type\": \"2\"\n                },\n                {\n                    \"ts\": \"HK\",\n                    \"code\": \"09988\",\n                    \"name\": \"阿里巴巴-SW\",\n                    \"type\": \"2\"\n                }\n            ]\n        }\n        body1 = {}\n        body1.update(body)\n        body1.update(body2)\n        sign1 = {\"sign\": get_sign(body1)}  # 把参数签名后通过sign1传出来\n        body1.update(sign1)\n        body = json.dumps(dict(body1))\n        # print(body)\n        comment_url = HTTP + \"/as_community/api/comment/v1/add\"\n        # print(comment_url)\n        r = Requests(self.session).post(\n            url=comment_url, headers=headers, data=body, title=\"发表评论\"\n        )\n        j = r.json()\n        # print(j)\n        commentId = j.get(\"data\").get(\"commentId\")\n        body3 = {\n            'postId': f\"{postId}\",\n            \"commentId\": f\"{commentId}\",\n            \"content\": \" [tag:00700.HK]已买入1手[tag:09988.HK]已买入1手\",\n            \"products\": [\n                {\n                    \"ts\": \"Hk\",\n                    \"code\": \"00700\",\n                    \"name\": \"腾讯控股\",\n                    \"type\": \"2\"\n                },\n                {\n                    \"ts\": \"HK\",\n                    \"code\": \"09988\",\n                    \"name\": \"阿里巴巴-SW\",\n                    \"type\": \"2\"\n                }\n            ]\n        }\n        body1 = {}\n        body1.update(body3)\n        sign1 = {\"sign\": get_sign(body1)}\n        body1.update(sign1)\n        body = json.dumps(dict(body1))\n        commentadd_url = HTTP + \"/as_community/api/comment/v1/add\"\n        r = Requests(self.session).post(\n            url=commentadd_url, headers=headers, data=body, title=\"发表评论的评论\"\n        )\n        h = r.json()\n        # print(h)\n        body = {'commentId': f\"{commentId}\"}\n        body1 = {}\n        body1.update(body)\n        sign1 = {\"sign\": get_sign(body1)}\n        body1.update(sign1)\n        body = json.dumps(dict(body1))\n        commentmore_list_url = HTTP + \"/as_community/api/comment/v1/more_list\"\n        r = Requests(self.session).post(\n            url=commentmore_list_url, headers=headers, data=body, title=\"查询一级评论下的更多评论\"\n        )\n        k = r.json()\n        # print(k)\n        # # 断言\n        assert r.status_code == 200\n        assert h.get(\"code\") == \"000000\"\n        assert h.get(\"msg\") == \"ok\"\n        if \"data\" in k:\n            if len(k.get(\"data\")) != 0:\n                assert \"commentId\" in k.get(\"data\")[0]\n>               assert k.get(\"data\")[0].get(\"commentId\") == commentId\nE               AssertionError: assert '5fcf4fab791d04000605a899' == '5fcf4fab791d04000605a898'\n\ntest_Community_commentmore_list.py:162: AssertionError"}, "start": 1607421808871, "stop": 1607421869076, "uuid": "2b9fcffd-fe0d-4a5f-8347-dcce92d2c79d", "historyId": "83cac4865cc302488746878b4a3a7d7d", "testCaseId": "b94d3312cc39641d47523f87b902624e", "fullName": "TestCase.Community.test_Community_commentmore_list.TestCommunitycommentmore_list#test_Community_commentmore_list", "labels": [{"name": "feature", "value": "社区-查询一级评论下的更多评论"}, {"name": "parentSuite", "value": "TestCase.Community"}, {"name": "suite", "value": "test_Community_commentmore_list"}, {"name": "subSuite", "value": "TestCommunitycommentmore_list"}, {"name": "host", "value": "DESKTOP-KBU1G8M"}, {"name": "thread", "value": "6884-MainThread"}, {"name": "framework", "value": "pytest"}, {"name": "language", "value": "cpython3"}, {"name": "package", "value": "TestCase.Community.test_Community_commentmore_list"}]}